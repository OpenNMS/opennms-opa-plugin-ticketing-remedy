<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="
           	   http://www.osgi.org/xmlns/blueprint/v1.0.0                  https://osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
               http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0 https://aries.apache.org/schemas/blueprint-cm/blueprint-cm-1.1.0.xsd
           ">

    <!-- Configuration properties -->
    <cm:property-placeholder id="remedyProperties" persistent-id="org.opennms.plugins.opa.ticketing.remedy" update-strategy="reload">
        <cm:default-properties>
            <!-- connecting to the web services -->
            <cm:property name="endpoint" value="" />
            <cm:property name="portname" value="HPD_IncidentInterface_WSPortTypeSoap"/>
            <cm:property name="createendpoint" value=""/>
            <cm:property name="createportname" value="HPD_IncidentInterface_Create_WSPortTypeSoap"/>

            <!-- authentication: username and password are required, the rest are optional -->
            <cm:property name="username" value=""/>
            <cm:property name="password" value=""/>
            <cm:property name="authentication" value=""/> <!-- eg, "ARSystem" -->
            <cm:property name="locale" value=""/> <!-- en_US -->
            <cm:property name="timezone" value=""/> <!-- EST -->

            <!-- mandatory, first and last name must exist in Remedy -->
            <cm:property name="firstname" value=""/>
            <cm:property name="lastname" value=""/>

            <!-- mandatory service CI and recon ID -->
            <cm:property name="serviceCI" value=""/>
            <cm:property name="serviceCIReconID" value=""/>

            <!-- mandatory service type, choose from one of the following: -->
            <cm:property name="serviceType" value="User Service Restoration">
                <cm:description>
                    The service type, choose from on of:
                    "User Service Restoration",
                    "User Service Request",
                    "Infrastructure Restoration", or
                    "Infrastructure Event"
                   </cm:description>
            </cm:property>

            <!-- mandatory reported source, choose from the following: -->
            <cm:property name="reportedSource" value="Direct Input"/>
            <!--
            <cm:property name="reportedSource" value="Email"/>
            <cm:property name="reportedSource" value="External Escalation"/>
            <cm:property name="reportedSource" value="Fax"/>
            <cm:property name="reportedSource" value="Systems Management"/>
            <cm:property name="reportedSource" value="Phone"/>
            <cm:property name="reportedSource" value="Voice Mail"/>
            <cm:property name="reportedSource" value="Walk In"/>
            <cm:property name="reportedSource" value="Web"/>
            <cm:property name="reportedSource" value="Other"/>
            -->

            <!-- ticket creation, target groups are colon-separated values -->
            <cm:property name="targetgroups" value=""/>
            <cm:property name="assignedgroup" value=""/>
            <cm:property name="assignedsupportcompany" value=""/>
            <cm:property name="assignedsupportorganization" value=""/>

            <!-- mandatory, set categorization tiers -->
            <cm:property name="categorizationtier1" value="Incident"/>
            <cm:property name="categorizationtier2" value="Generic"/>
            <cm:property name="categorizationtier3" value="Non-Blocking"/>

            <!-- mandatory, set impact -->
            <cm:property name="impact" value="1-Extensive/Widespread"/>
            <!--
            <cm:property name="impact" value="2-Significant/Large"/>
            <cm:property name="impact" value="3-Moderate/Limited"/>
            <cm:property name="impact" value="4-Minor/Localized"/>
            -->

            <!-- urgency -->
            <cm:property name="urgency" value="1-Critical"/>
            <!--
            <cm:property name="urgency" value="2-High"/>
            <cm:property name="urgency" value="3-Medium"/>
            <cm:property name="urgency" value="4-Low"/>
            -->

            <cm:property name="reason.resolved" value="Automated Resolution Reported">
                <cm:description>
                    The reason code to use when the ticket is resolved in OpenNMS.
                </cm:description>
            </cm:property>
            <cm:property name="reason.reopen" value="Pending Original Incident">
                <cm:description>
                    The reason code used when a ticket is reopened or closed in OpenNMS.
                   </cm:description>
            </cm:property>
            <cm:property name="reason.cancelled" value="No Longer Relevant">
                <cm:description>
                    The reason code used when a ticket is cancelled in OpenNMS.
                   </cm:description>
            </cm:property>
            <cm:property name="resolution" value="Closed from OpenNMS">
                <cm:description>
                    The resolution to use when the ticket is resolved from OpenNMS.
                </cm:description>
            </cm:property>

        </cm:default-properties>
    </cm:property-placeholder>

    <reference id="configAdmin" interface="org.osgi.service.cm.ConfigurationAdmin" />

    <bean id="ticketerPlugin" class="org.opennms.plugins.opa.ticketing.remedy.core.RemedyTicketerPlugin">
        <argument ref="configAdmin" />
    </bean>
    <service ref="ticketerPlugin" interface="org.opennms.integration.api.v1.ticketing.TicketingPlugin" />
</blueprint>